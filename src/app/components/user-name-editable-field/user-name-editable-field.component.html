<ng-container *ngIf="editing; else readOnly">
  <!-- fields -->
  <form
    #form="extendedForm"
    (validSubmit)="modified.emit(this.group.getRawValue())"
    [formGroup]="group"
    appExtendedForm
    class="cm-fields">
    <app-form-field
      label="First Name">
      <input
        class="cm-mat-input"
        formControlName="firstName"/>

      <app-form-error [control]="group.get('firstName')" errorCode="required">
        Invalid first name
      </app-form-error>
    </app-form-field>

    <app-form-field
      label="Last Name">
      <input
        class="cm-mat-input"
        formControlName="lastName"/>

      <app-form-error [control]="group.get('lastName')" errorCode="required">
        Invalid last name
      </app-form-error>
    </app-form-field>

    <button hidden></button>
  </form>

  <!-- actions -->
  <div class="cm-actions">
    <ng-container *ngIf="loading; else actions">
      Loading...
    </ng-container>

    <ng-template #actions>
      <button
        (click)="form.submit()"
        appStrokeButton
        color="primary">
        Modify
      </button>

      <button
        (click)="editing = false; reset()"
        appStrokeButton
        color="primary">
        Cancel
      </button>
    </ng-template>
  </div>
</ng-container>

<ng-template #readOnly>
  <!-- first name -->
  <app-form-field
    label="First Name">
    {{firstName}}
  </app-form-field>

  <!-- last name -->
  <app-form-field
    label="Last Name">
    {{lastName}}
  </app-form-field>

  <!-- edit icon -->
  <app-icon-edit
    (click)="editing = true"
    [clickable]="true"></app-icon-edit>
</ng-template>
